(()=>{var e={280:(e,t,o)=>{"use strict";o.d(t,{h:()=>r});class r{parse(e,t={}){const o=(t=Object.assign({binary:!1},t)).binary,r=[];let n,i=0;e.traverse((function(e){if(e.isMesh){const t=e.geometry,o=t.index,n=t.getAttribute("position");i+=null!==o?o.count/3:n.count/3,r.push({object3d:e,geometry:t})}}));let s=80;if(!0===o){const e=new ArrayBuffer(2*i+3*i*4*4+80+4);n=new DataView(e),n.setUint32(s,i,!0),s+=4}else n="",n+="solid exported\n";const a=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,p=new THREE.Vector3,f=new THREE.Vector3,u=new THREE.Vector3;for(let e=0,t=r.length;e<t;e++){const t=r[e].object3d,o=r[e].geometry,n=o.index,i=o.getAttribute("position");if(null!==n)for(let e=0;e<n.count;e+=3)d(n.getX(e+0),n.getX(e+1),n.getX(e+2),i,t);else for(let e=0;e<i.count;e+=3)d(e+0,e+1,e+2,i,t)}return!1===o&&(n+="endsolid exported\n"),n;function d(e,t,r,i,d){a.fromBufferAttribute(i,e),l.fromBufferAttribute(i,t),c.fromBufferAttribute(i,r),!0===d.isSkinnedMesh&&(d.applyBoneTransform(e,a),d.applyBoneTransform(t,l),d.applyBoneTransform(r,c)),a.applyMatrix4(d.matrixWorld),l.applyMatrix4(d.matrixWorld),c.applyMatrix4(d.matrixWorld),function(e,t,r){p.subVectors(r,t),f.subVectors(e,t),p.cross(f).normalize(),u.copy(p).normalize(),!0===o?(n.setFloat32(s,u.x,!0),s+=4,n.setFloat32(s,u.y,!0),s+=4,n.setFloat32(s,u.z,!0),s+=4):(n+="\tfacet normal "+u.x+" "+u.y+" "+u.z+"\n",n+="\t\touter loop\n")}(a,l,c),y(a),y(l),y(c),!0===o?(n.setUint16(s,0,!0),s+=2):(n+="\t\tendloop\n",n+="\tendfacet\n")}function y(e){!0===o?(n.setFloat32(s,e.x,!0),s+=4,n.setFloat32(s,e.y,!0),s+=4,n.setFloat32(s,e.z,!0),s+=4):n+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n"}}}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");const e=o(280).h;AFRAME.registerSystem("stl-exporter",{schema:{verbose:{default:!1}},multiple:!1,init:function(){this.exporter=new e},export:function(e,t){var o,r,n,i=document.createElement("a");function s(e,t){i.href=URL.createObjectURL(e),i.download=t||"data.json",i.dispatchEvent(new MouseEvent("click"))}o=void 0===e?this.sceneEl.object3D:e.object3D,t&&!0===t.binary?(r=this.exporter.parse(o,{binary:!0}),"model-binary.stl",s(new Blob([r],{type:"application/octet-stream"}),"model-binary.stl")):(n=this.exporter.parse(o),s(new Blob([n],{type:"text/plain"}),"model-ascii.stl"))}})})()})();